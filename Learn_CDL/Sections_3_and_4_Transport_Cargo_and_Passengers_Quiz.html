
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sections 3 and 4 - Transport Cargo and Passengers</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for radio buttons */
        .option-radio {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border-radius: 50%;
            width: 1.25rem;
            height: 1.25rem;
            border: 2px solid #d1d5db; /* gray-300 */
            transition: all 0.2s ease-in-out;
            position: relative;
            cursor: pointer;
        }
        .option-radio:checked {
            border-color: #4f46e5; /* indigo-600 */
            background-color: #4f46e5; /* indigo-600 */
        }
        .option-radio:checked::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0.5rem;
            height: 0.5rem;
            border-radius: 50%;
            background-color: white;
            transform: translate(-50%, -50%);
        }
        .correct {
            background-color: #dcfce7 !important; /* green-100 */
            border-left: 4px solid #22c55e; /* green-500 */
        }
        .incorrect {
            background-color: #fee2e2 !important; /* red-100 */
            border-left: 4px solid #ef4444; /* red-500 */
        }
        .correct-answer-text {
            color: #166534; /* green-800 */
            font-weight: 500;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900">Sections 3 and 4</h1>
            <p class="text-lg sm:text-xl text-indigo-600 font-semibold">Transport Cargo and Passengers</p>
        </header>

        <main id="quiz-container" class="space-y-6">
            <!-- Quiz questions will be dynamically inserted here -->
        </main>

        <footer class="text-center mt-8">
            <button id="submit-btn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform transform hover:scale-105">
                Check Answers
            </button>
            <div id="results-container" class="mt-6 text-2xl font-bold text-gray-800 hidden"></div>
        </footer>
    </div>

    <script>
        // --- DATA ---
        // An array of objects to hold all our quiz questions, options, and the correct answer.
        // This makes it easy to add, remove, or change questions without touching the HTML.
        const quizData = [
            {
                section: "Section 3: Transporting Cargo Safely",
                question: "What are commercial drivers responsible for regarding cargo?",
                options: [
                    "Only knowing if the cargo is properly secured.",
                    "Only inspecting the cargo and recognizing overloads.",
                    "Inspecting cargo, recognizing overloads, ensuring proper securement, clear view, and access to emergency equipment.",
                    "Ensuring the cargo is covered and sealed at all times."
                ],
                answer: "Inspecting cargo, recognizing overloads, ensuring proper securement, clear view, and access to emergency equipment."
            },
            {
                section: "Section 3: Transporting Cargo Safely",
                question: "How often should a driver inspect cargo and securing devices during a trip?",
                options: [
                    "Only at the beginning of the trip.",
                    "Within the first 50 miles, and then every 3 hours or 150 miles, or after every break.",
                    "Every 100 miles, regardless of time or breaks.",
                    "Only when crossing state lines."
                ],
                answer: "Within the first 50 miles, and then every 3 hours or 150 miles, or after every break."
            },
            {
                section: "Section 3: Transporting Cargo Safely",
                question: "Which of the following defines \"Gross Combination Weight Rating (GCWR)\" according to the manual?",
                options: [
                    "The maximum weight a tire can carry at a specified pressure.",
                    "The weight transmitted to the ground by one axle or one set of axles.",
                    "The value specified by the manufacturer as the loaded weight of a single vehicle.",
                    "The value specified by the manufacturer of the power unit or the sum of GVWRs/GVWs of the power unit and towed unit(s) that produces the highest value."
                ],
                answer: "The value specified by the manufacturer of the power unit or the sum of GVWRs/GVWs of the power unit and towed unit(s) that produces the highest value."
            },
            {
                section: "Section 3: Transporting Cargo Safely",
                question: "What is the main danger associated with a high center of gravity in a vehicle, especially for liquid tankers?",
                options: [
                    "Increased braking distance.",
                    "Greater likelihood of tire blowouts.",
                    "Higher chance of tipping over, especially in curves or during swerving.",
                    "Difficulty in securing cargo properly."
                ],
                answer: "Higher chance of tipping over, especially in curves or during swerving."
            },
            {
                section: "Section 3: Transporting Cargo Safely",
                question: "What is the minimum number of tie-downs required for any piece of cargo on a flatbed trailer or a trailer without sides?",
                options: [
                    "One tie-down for every ten feet of cargo.",
                    "At least two tie-downs.",
                    "Three tie-downs for stability.",
                    "No minimum if the cargo is braced."
                ],
                answer: "At least two tie-downs."
            },
            {
                section: "Section 3: Transporting Cargo Safely",
                question: "If a driver needs to carry hazardous material that requires placards on their vehicle, what additional endorsement will they need on their CDL?",
                options: [
                    "A passenger endorsement.",
                    "A tank vehicle endorsement.",
                    "A hazardous materials endorsement.",
                    "A doubles/triples endorsement."
                ],
                answer: "A hazardous materials endorsement."
            },
            {
                section: "Section 3: Transporting Cargo Safely",
                question: "Which of the following is a consequence of poor weight balance with too little weight on the driving axles?",
                options: [
                    "Hard steering.",
                    "Increased traction.",
                    "Poor traction, making drive wheels spin easily.",
                    "Damage to the steering axle."
                ],
                answer: "Poor traction, making drive wheels spin easily."
            },
            {
                section: "Section 3: Transporting Cargo Safely",
                question: "What are the two basic reasons for covering cargo on an open bed?",
                options: [
                    "To protect the cargo from theft and to improve aerodynamics.",
                    "To protect people from spilled cargo and to protect the cargo from weather.",
                    "To prevent the cargo from shifting and to meet aesthetic requirements.",
                    "To reduce noise pollution and to increase fuel efficiency."
                ],
                answer: "To protect people from spilled cargo and to protect the cargo from weather."
            },
            {
                section: "Section 4: Transporting Passengers Safely",
                question: "A bus driver must have a Commercial Driver License (CDL) if they drive a vehicle designed to seat how many persons, including the driver?",
                options: [
                    "8 or more persons.",
                    "16 or more persons.",
                    "10 or more persons.",
                    "Any number of persons if they are passengers."
                ],
                answer: "16 or more persons."
            },
            {
                section: "Section 4: Transporting Passengers Safely",
                question: "Which of the following items must be checked as being in safe working condition in the interior of a bus before driving?",
                options: [
                    "Only the driver's seat and dashboard lights.",
                    "Each handhold and railing, floor covering, signaling devices, and emergency exit handles.",
                    "Only the passenger seats and windows.",
                    "The air conditioning and radio."
                ],
                answer: "Each handhold and railing, floor covering, signaling devices, and emergency exit handles."
            },
            {
                section: "Section 4: Transporting Passengers Safely",
                question: "Which of the following hazardous materials are explicitly stated as forbidden to be carried on a bus in the space occupied by people?",
                options: [
                    "Small arms ammunition.",
                    "Emergency hospital supplies.",
                    "Labeled radioactive materials.",
                    "Drugs."
                ],
                answer: "Labeled radioactive materials."
            },
            {
                section: "Section 4: Transporting Passengers Safely",
                question: "What is the purpose of a \"standee line\" on a bus?",
                options: [
                    "To indicate where carry-on baggage should be stored.",
                    "To show where a bus driver should stand when the bus is stopped.",
                    "To mark the area forward of the driver's seat where no rider may stand.",
                    "To define the maximum capacity of standing passengers."
                ],
                answer: "To mark the area forward of the driver's seat where no rider may stand."
            },
            {
                section: "Section 4: Transporting Passengers Safely",
                question: "When dealing with a drunk or disruptive rider, where should the driver generally avoid discharging them?",
                options: [
                    "At the next scheduled stop.",
                    "At a well-lighted area where there are other people.",
                    "Where it would be unsafe for them.",
                    "At a designated bus stop."
                ],
                answer: "Where it would be unsafe for them."
            },
            {
                section: "Section 4: Transporting Passengers Safely",
                question: "How far before a railroad crossing must a bus stop?",
                options: [
                    "Between 5 and 10 feet.",
                    "Between 15 and 50 feet.",
                    "At least 100 feet.",
                    "Only if a train is visible."
                ],
                answer: "Between 15 and 50 feet."
            },
            {
                section: "Section 4: Transporting Passengers Safely",
                question: "Which of the following is a prohibited practice for bus drivers according to the manual?",
                options: [
                    "Transporting small amounts of emergency hospital supplies.",
                    "Fueling the bus with riders on board in a closed building.",
                    "Announcing the next departure time at a destination.",
                    "Using the brake-door interlock system."
                ],
                answer: "Fueling the bus with riders on board in a closed building."
            }
        ];

        // --- DOM ELEMENTS ---
        // Getting references to the HTML elements we'll need to interact with.
        const quizContainer = document.getElementById('quiz-container');
        const submitButton = document.getElementById('submit-btn');
        const resultsContainer = document.getElementById('results-container');
        let currentSection = "";

        // --- FUNCTIONS ---

        /**
         * This function builds and displays the quiz on the page.
         * It loops through the quizData array and creates the HTML for each question.
         */
        function buildQuiz() {
            // Using map to transform each question object into an HTML string.
            const output = quizData.map((currentQuestion, questionNumber) => {
                
                // Build the HTML for the answer options for the current question.
                const options = currentQuestion.options.map(option =>
                    `<label class="flex items-center p-3 rounded-lg bg-gray-50 hover:bg-indigo-100 transition-colors duration-200 cursor-pointer border border-gray-200">
                        <input type="radio" name="question${questionNumber}" value="${option}" class="option-radio mr-4 flex-shrink-0">
                        <span class="text-gray-700">${option}</span>
                    </label>`
                ).join(''); // .join('') combines the array of option strings into one big string.

                // Add a section header if it's a new section
                let sectionHeader = '';
                if (currentQuestion.section !== currentSection) {
                    currentSection = currentQuestion.section;
                    sectionHeader = `<h2 class="text-2xl font-bold text-gray-800 border-b-2 border-indigo-200 pb-2 mb-4">${currentSection}</h2>`;
                }

                // Return the complete HTML for this question card.
                return `
                    ${sectionHeader}
                    <div class="bg-white p-6 rounded-xl shadow-sm question-card">
                        <p class="font-semibold text-lg mb-4">${questionNumber + 1}. ${currentQuestion.question}</p>
                        <div class="space-y-3 options-container">${options}</div>
                        <div id="feedback${questionNumber}" class="mt-3 text-sm"></div>
                    </div>
                `;
            }).join('');

            // Set the inner HTML of our quiz container to the generated output.
            quizContainer.innerHTML = output;
        }

        /**
         * This function checks the answers, displays the results, and provides feedback.
         */
        function showResults() {
            let numCorrect = 0;
            const questionCards = document.querySelectorAll('.question-card');

            // Loop through each question to check the answer.
            quizData.forEach((currentQuestion, questionNumber) => {
                const card = questionCards[questionNumber];
                const optionsContainer = card.querySelector('.options-container');
                const feedbackEl = card.querySelector(`#feedback${questionNumber}`);
                
                // Find the radio button that the user selected.
                const selector = `input[name=question${questionNumber}]:checked`;
                const userAnswerNode = optionsContainer.querySelector(selector);
                const userAnswer = userAnswerNode ? userAnswerNode.value : undefined;

                // Loop through all options to style them
                const allOptionLabels = optionsContainer.querySelectorAll('label');
                allOptionLabels.forEach(label => {
                    const input = label.querySelector('input');
                    // If the option is the correct answer, highlight it green
                    if (input.value === currentQuestion.answer) {
                        label.classList.add('correct');
                    } 
                    // If the user selected this option and it's WRONG, highlight it red
                    else if (input.value === userAnswer && userAnswer !== currentQuestion.answer) {
                        label.classList.add('incorrect');
                    }
                });

                // Check if the user's answer is correct.
                if (userAnswer === currentQuestion.answer) {
                    numCorrect++;
                } else {
                    // If the answer is wrong and the user selected something, show the correct answer.
                    if (userAnswer) {
                       feedbackEl.innerHTML = `<span class="correct-answer-text">Correct Answer: ${currentQuestion.answer}</span>`;
                    } else {
                       feedbackEl.innerHTML = `<span class="text-red-600 font-medium">This question was not answered.</span>`;
                    }
                }
            });

            // Calculate the score and display it.
            const score = ((numCorrect / quizData.length) * 100).toFixed(0);
            resultsContainer.innerHTML = `You got ${numCorrect} out of ${quizData.length} correct! (${score}%)`;
            resultsContainer.classList.remove('hidden'); // Make the results visible.
            submitButton.textContent = "Try Again"; // Change button text
            submitButton.onclick = resetQuiz; // Change button function
        }
        
        /**
         * This function resets the quiz to its initial state.
         */
        function resetQuiz() {
            resultsContainer.classList.add('hidden'); // Hide results
            submitButton.textContent = "Check Answers"; // Reset button text
            submitButton.onclick = showResults; // Reset button function
            buildQuiz(); // Rebuild the quiz to clear selections and feedback
            window.scrollTo(0, 0); // Scroll to the top of the page
        }


        // --- EVENT LISTENERS ---
        // This is where the script starts.
        // It builds the quiz when the page loads, and listens for a click on the submit button.
        document.addEventListener('DOMContentLoaded', () => {
            buildQuiz();
            submitButton.addEventListener('click', showResults);
        });

    </script>
</body>
</html>
